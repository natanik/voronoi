package ru.animalware.geo.voronoi

final case class Point(x: Double, y: Double) extends Ordered[Point] {

  override def compare(that: Point): Int = if (y != that.y) y.compareTo(that.y) else x.compareTo(that.x)

  def distanceTo(that: Point): Double = Math.sqrt(Math.pow(x - that.x, 2) + Math.pow(y - that.y, 2))

  def distanceToParabola(focus: Point): Double =
    if (deltaY(focus) != 0)
      Math.pow(distanceTo(focus), 2) / (2 * Math.abs(deltaY(focus)))
    else 0

  def atan2With(that: Point): Double = Math.atan2(that.y - y, that.x - x)

  private def deltaY(p: Point): Double = y - p.y
}